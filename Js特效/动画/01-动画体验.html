<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			.box1 {
				margin: 0;
				padding: 5px;
				height: 200px;
				position: relative;
			}


			button {
				margin: 5px;
			}

			.box2 {
				position: absolute;
				width: 100px;
				height: 100px;
				background-color: pink;
				border: 1px solid #ccc;
				left: 0;
			}

			.box3 {
				position: absolute;
				width: 100px;
				height: 100px;
				background-color: red;
				border: 1px solid #ccc;
				left: 0;
				top: 160px;
			}
		</style>

	</head>
	<body>
		<div class="box1">
			<button>移动到200</button>
			<button>移动到400</button>
			<div class="box2"></div>
			<div class="box3"></div>
		</div>
		<script>
			var btnArr = document.getElementsByTagName("button");
			var box2 = document.getElementsByClassName("box2")[0];
			var box3 = document.getElementsByClassName("box3")[0];

			var timer = null;
			btnArr[0].onclick = function() {
				// 	timer = setInterval(function() {
				// 		box2.style.left = box2.offsetLeft + 10 + "px";
				// 		if (box2.offsetLeft === 200) {
				// 			clearInterval(timer);
				// 		}
				// 	}, 100)
				animate(box2, 200);
				animate(box3, 200);
			}

			btnArr[1].onclick = function() {
				// 	timer = setInterval(function() {
				// 		box2.style.left = box2.offsetLeft + 10 + "px";
				// 		if (box2.offsetLeft === 400) {
				// 			clearInterval(timer);
				// 		}
				// 	}, 100)
				animate(box2, 400);
				animate(box3, 400);
			}

			//封装
			function animate(ele, disance) {
				clearInterval(ele.timer);
				var speed = disance > ele.offsetLeft ? 10 : -10;
				ele.timer = setInterval(function() {
					var val = disance - ele.offsetLeft;
					ele.style.left = ele.offsetLeft + speed + "px";
					if (Math.abs(val) < Math.abs(speed)) {
						ele.style.left = disance + "px";
						clearInterval(ele.timer);
					}
				}, 10)

			}
		</script>
	</body>
</html>
